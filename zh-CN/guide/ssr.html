<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SSR | Kbt UI</title>
    <meta name="description" content="基于 Vue 3，面向设计师和开发者的组件库">
    <link rel="stylesheet" href="/assets/style.c343c6af.css">
    <link rel="modulepreload" href="/assets/app.2f331f2f.js">
    <link rel="modulepreload" href="/assets/zh-CN_guide_ssr.md.0ceb5f29.lean.js">
    
    <link rel="icon" href="/images/kbt-ui-logo.pngvg" type="image/svg+xm">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">
  <meta name="msapplication-TileColor" content="#409eff">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta property="og:image" content="/images/kbt-ui-og-image.png">
  <script>window.supportedLangs=["en-US-BP","zh-CN"];</script>
  <script>(()=>{const o=window.supportedLangs,a="preferred_lang",r="zh-CN",s={en:"zh-CN",fr:"fr-FR",es:"es-ES"};let e=localStorage.getItem(a)||navigator.language;const n=s[e]||(o.includes(e)?e:r);if(localStorage.setItem(a,n),e=n,!location.pathname.startsWith(`/${e}`)){const t=[`/${e}`].concat(location.pathname.split("/").slice(2)).join("/");location.pathname=t.endsWith(".html")||t.endsWith("/")?t:t.concat("/")}navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"LANG",lang:e})})();</script>
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-175337989-1"></script>
  <script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(o){console.log(o)}).catch(function(o){console.log(o)});</script>
  <script async="true">window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-175337989-1");</script>
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-M74ZHEQ1M1"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-M74ZHEQ1M1");</script>
  <script>(function(t,s,n,h,j,e){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:2894908,hjsv:6},j=s.getElementsByTagName("head")[0],e=s.createElement("script"),e.async=1,e.src=n+t._hjSettings.hjid+h+t._hjSettings.hjsv,j.appendChild(e)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=");</script>
  <script async="true">var resource=document.createElement("link");resource.setAttribute("rel","stylesheet"),resource.setAttribute("href","https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,800|Open+Sans:400,600;display=swap"),resource.setAttribute("type","text/css");var head=document.querySelector("head");head.appendChild(resource);</script>
  <script>(()=>{const e=localStorage.getItem("k-theme-appearance");(e==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  <meta name="twitter:title" content="SSR | Kbt UI">
  <meta property="og:title" content="SSR | Kbt UI">
  </head>
  <body>
    <div id="app"><div class="App"><!--[--><span tabindex="-1" data-v-d2e1b550></span><a href="#page-content" class="skip-link visually-hidden" data-v-d2e1b550>Skip to content</a><!--]--><!----><header class="navbar has-sidebar"><div class="navbar-wrapper" data-v-6cf2e297><div class="header-container" data-v-6cf2e297><div class="logo-container" data-v-6cf2e297><a href="/zh-CN/" data-v-6cf2e297><img class="logo" src="/images/kbt-ui-logo.png" alt="Kbt UI Logo" data-v-6cf2e297></a></div><div class="content" data-v-6cf2e297><div id="docsearch" class="algolia-search-box search" data-v-6cf2e297></div><nav class="navbar-menu menu" data-v-6cf2e297><!--[--><a class="link-item link is-menu-link active" href="/en-US-BP/guide/design" data-v-49fa2202 data-v-c7b9c144><!--[--><!--[-->Guide<!--]--><!--]--><!----></a><a class="link-item link is-menu-link" href="/en-US-BP/component/overview" data-v-49fa2202 data-v-c7b9c144><!--[--><!--[-->Component<!--]--><!--]--><!----></a><a class="link-item link is-menu-link" href="/en-US-BP/resource/index" data-v-49fa2202 data-v-c7b9c144><!--[--><!--[-->Resource<!--]--><!--]--><!----></a><!--]--></nav><div class="theme-toggler-content theme-toggler" data-v-6cf2e297 data-v-b1b91f92><div aria-label="toggle dark mode" aria-checked="false" data-v-b1b91f92 data-v-a974c4d8><!----></div></div><div class="translation-container translation" data-v-6cf2e297 data-v-5babbdd6><!----></div><div class="social-links" data-v-6cf2e297 data-v-76aa5200><!--[--><a href="https://github.com/kbt-ui/kbt-ui" title="GitHub" target="_blank" rel="noreferrer noopener" class="social-link" data-v-76aa5200 data-v-3b7f67f4><i class="k-icon" style="font-size:24px;" data-v-3b7f67f4><!--[--><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-3b7f67f4><path fill="currentColor" d="M12.001 2c-5.525 0-10 4.475-10 10a9.994 9.994 0 0 0 6.837 9.488c.5.087.688-.213.688-.476c0-.237-.013-1.024-.013-1.862c-2.512.463-3.162-.612-3.362-1.175c-.113-.288-.6-1.175-1.025-1.413c-.35-.187-.85-.65-.013-.662c.788-.013 1.35.725 1.538 1.025c.9 1.512 2.337 1.087 2.912.825c.088-.65.35-1.087.638-1.337c-2.225-.25-4.55-1.113-4.55-4.938c0-1.088.387-1.987 1.025-2.687c-.1-.25-.45-1.275.1-2.65c0 0 .837-.263 2.75 1.024a9.28 9.28 0 0 1 2.5-.337c.85 0 1.7.112 2.5.337c1.913-1.3 2.75-1.024 2.75-1.024c.55 1.375.2 2.4.1 2.65c.637.7 1.025 1.587 1.025 2.687c0 3.838-2.337 4.688-4.562 4.938c.362.312.675.912.675 1.85c0 1.337-.013 2.412-.013 2.75c0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10"></path></svg><!--]--></i></a><!--]--></div><button class="reset-btn menu-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="full-screen" data-v-6cf2e297><span class="hamburger-1"></span><span class="hamburger-2"></span><span class="hamburger-3"></span></button></div></div></div><!----></header><div class="sub-nav py-3 flex items-center"><button class="reset-btn sidebar-button flex items-center" aria-expanded="false"><i class="k-icon mr-2" style="font-size:20px;"><!--[--><svg width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="7" width="11" height="2" fill="#606266"></rect><rect x="2" y="11" width="14" height="2" fill="#606266"></rect><rect x="2" y="15" width="8" height="2" fill="#606266"></rect><rect x="2" y="3" width="16" height="2" fill="#606266"></rect></svg><!--]--></i><span class="leading-6">Menu</span></button><button ariadisabled="false" type="button" class="k-button is-link go-back-top height-5" style=""><!--v-if--><span class=""><!--[--> Back to top <!--]--></span></button></div><div class="k-scrollbar sidebar"><div class="k-scrollbar__wrap k-scrollbar__wrap--hidden-default" style=""><div class="k-scrollbar__view" style=""><!--[--><aside><!--[--><!--]--><div class="sidebar-groups"><!--[--><section class="sidebar-group"><p class="sidebar-group__title">Basics</p><!--[--><a class="link" href="/en-US-BP/guide/design" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Design</p><!----></a><a class="link" href="/en-US-BP/guide/nav" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Navigation</p><!----></a><a class="link" href="/en-US-BP/guide/installation" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Installation</p><!----></a><a class="link" href="/en-US-BP/guide/quickstart" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Quick Start</p><!----></a><!--]--></section><section class="sidebar-group"><p class="sidebar-group__title">Advanced</p><!--[--><a class="link" href="/en-US-BP/guide/i18n" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>i18n</p><!----></a><a class="link" href="/en-US-BP/guide/theming" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Theming</p><!----></a><a class="link" href="/en-US-BP/guide/dark-mode" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Dark Mode</p><!----></a><a class="link" href="/en-US-BP/guide/namespace" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Custom Namespace</p><!----></a><a class="link active" href="/en-US-BP/guide/ssr" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>SSR</p><!----></a><a class="link" href="/en-US-BP/guide/transitions" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Built-in Transitions</p><!----></a><!--]--></section><section class="sidebar-group"><p class="sidebar-group__title">Development</p><!--[--><a class="link" href="/en-US-BP/guide/dev-guide" data-v-189bd8ba><p class="link-text" data-v-189bd8ba>Development Guide</p><!----></a><!--]--></section><!--]--></div><!--[--><!--]--></aside><!--]--></div></div><!--[--><div class="k-scrollbar__bar is-horizontal" style="display:none;"><div class="k-scrollbar__thumb" style="width:;transform:translateX(0%);"></div></div><div class="k-scrollbar__bar is-vertical" style="display:none;"><div class="k-scrollbar__thumb" style="height:;transform:translateY(0%);"></div></div><!--]--></div><main id="page-content" class="page-content has-sidebar"><div class="doc-content-wrapper"><div class="doc-content-container"><div style="position:relative;" class="doc-content"><div><h1 id="server-side-rendering-ssr" tabindex="-1">Server-Side Rendering (SSR) <a class="header-anchor vp-link" href="#server-side-rendering-ssr" aria-hidden="true">#</a></h1><p>When using Kbt UI for SSR development, you need to carry out special handling during SSR to avoid hydrate errors.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For Nuxt users, we provide a <a href="https://github.com/kbt-ui/kbt-ui-nuxt" class="vp-link" target="_blank" rel="noopener noreferrer">Nuxt module<svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="link-icon"><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3z"></path></svg></a> that contains these special processes. You only need to install it.</p></div><h2 id="provide-an-id" tabindex="-1">Provide an ID <a class="header-anchor vp-link" href="#provide-an-id" aria-hidden="true">#</a></h2><p>The provided value is used to generate the unique ID in Kbt UI. Because the different IDs are prone to hydrate errors in SSR, in order to ensure that the server side and client side generate the same ID, we need to inject the <code>ID_injection_key</code> into Vue.</p><div class="language-ts"><pre><code><span class="token comment">// src/main.js (irrelevant code omitted)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ID_INJECTION_KEY</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;kbt-ui&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token constant">ID_INJECTION_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  prefix<span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
  current<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="provide-zindex" tabindex="-1">Provide ZIndex <a class="header-anchor vp-link" href="#provide-zindex" aria-hidden="true">#</a></h2><p>When you using SSR for development, you may encounter hydration errors caused by <code>z-index</code>. In this case, we recommend injecting an initial value to avoid such errors.</p><div class="language-ts"><pre><code><span class="token comment">// src/main.js (irrelevant code omitted)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ZINDEX_INJECTION_KEY</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;kbt-ui&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token constant">ZINDEX_INJECTION_KEY</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> current<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="teleports" tabindex="-1">Teleports <a class="header-anchor vp-link" href="#teleports" aria-hidden="true">#</a></h2><p><a href="https://vuejs.org/guide/scaling-up/ssr.html#teleports" class="vp-link" target="_blank" rel="noopener noreferrer">Teleport<svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="link-icon"><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3z"></path></svg></a> is used internally by multiple components in Kbt UI (eg. KDialog, KDrawer, KTooltip, KDropdown, KSelect, KDatePicker ...), so special handling is required during SSR.</p><h3 id="render-the-teleport-on-the-mount" tabindex="-1">Render the Teleport on the mount <a class="header-anchor vp-link" href="#render-the-teleport-on-the-mount" aria-hidden="true">#</a></h3><p>An easier solution is to conditionally render the Teleport on the mount.</p><p>For example, use the <code>ClientOnly</code> component in Nuxt.</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>client-only</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k-tooltip</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>the tooltip content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k-button</span><span class="token punctuation">&gt;</span></span>tooltip<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k-tooltip</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>client-only</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>or</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> isClient <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  isClient<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k-tooltip</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isClient<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>the tooltip content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>k-button</span><span class="token punctuation">&gt;</span></span>tooltip<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>k-tooltip</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="inject-the-teleport-markup" tabindex="-1">Inject the teleport markup <a class="header-anchor vp-link" href="#inject-the-teleport-markup" aria-hidden="true">#</a></h3><p>Another way is to inject the teleport markup into the correct location in your final page HTML.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>There may be some <a href="https://github.com/vuejs/core/issues?q=is%3Aissue+is%3Aopen+ssr+teleport+" class="vp-link" target="_blank" rel="noopener noreferrer">SSR problems with teleport<svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="link-icon"><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3z"></path></svg></a>, so you should pay attention to the following precautions.</p><ol><li>The <code>teleported</code> attribute in all components based on KTooltip should be consistent, it is recommended to use the default value.</li><li>The <code>append-to-body</code> attribute value of KDialog and KDrawer should be consistent, it is recommended to enable the <code>append-to-body</code>.</li><li>When the KSubMenu component has a multi-layer popup, It is recommended to enable the <code>teleported</code></li></ol></div><p>You need to inject the teleport markup close to the <code>&lt;body&gt;</code> tag.</p><div class="language-html"><pre><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Kbt UI<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--preload-links--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--app-teleports--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--app-html--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/entry-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you modify the <a href="./namespace.html" class="vp-link">Namespace</a> or <code>append-to</code> attribute, you need to adjust the <code>#k-popper-container-</code> value.</p></div><div class="language-js"><pre><code><span class="token comment">// src/entry-server.js (irrelevant code omitted)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue/server-renderer&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./main&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> manifest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">renderToString</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
  <span class="token keyword">const</span> preloadLinks <span class="token operator">=</span> <span class="token function">renderPreloadLinks</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>modules<span class="token punctuation">,</span> manifest<span class="token punctuation">)</span>
  <span class="token keyword">const</span> teleports <span class="token operator">=</span> <span class="token function">renderTeleports</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>teleports<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>html<span class="token punctuation">,</span> preloadLinks<span class="token punctuation">,</span> teleports<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderTeleports</span><span class="token punctuation">(</span><span class="token parameter">teleports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>teleports<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#39;&#39;</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>teleports<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;#k-popper-container-&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>all<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;div id=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> all
  <span class="token punctuation">}</span><span class="token punctuation">,</span> teleports<span class="token punctuation">.</span>body <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// server.js or prerender.js (irrelevant code omitted)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>appHtml<span class="token punctuation">,</span> preloadLinks<span class="token punctuation">,</span> teleports<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">render</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> manifest<span class="token punctuation">)</span>

<span class="token keyword">const</span> html <span class="token operator">=</span> template
  <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;!--preload-links--&gt;&#39;</span><span class="token punctuation">,</span> preloadLinks<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;!--app-html--&gt;&#39;</span><span class="token punctuation">,</span> appHtml<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\n|\r\n)\s*&lt;!--app-teleports--&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> teleports<span class="token punctuation">)</span>
</code></pre></div></div></div><footer class="page-footer" data-v-3e2f3e7f><div class="edit" data-v-3e2f3e7f><div class="edit-link" data-v-3e2f3e7f data-v-411dbfd0><a class="link text-sm" href="https://crowdin.com/translate/kbt-ui/all/en-en" target="_blank" rel="noopener noreferrer" data-v-411dbfd0>Edit this page on Crowdin <i class="k-icon" style="font-size:16px;vertical-align:text-top;line-height:24px;" data-v-411dbfd0><!--[--><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-411dbfd0><path fill="currentColor" d="M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm11-3v8h-2V6.413l-7.793 7.794l-1.414-1.414L17.585 5H13V3z"></path></svg><!--]--></i></a></div></div></footer><div class="next-and-prev-link" data-v-14fc1aee><div class="container" data-v-14fc1aee><div class="prev" data-v-14fc1aee><a class="link" href="/en-US-BP/guide/namespace" data-v-14fc1aee><i class="k-icon mr-1" style="" data-v-14fc1aee><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" data-v-14fc1aee><path fill="currentColor" d="M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"></path></svg><!--]--></i><span class="text" data-v-14fc1aee>Custom Namespace</span></a></div><div class="next" data-v-14fc1aee><a class="link" href="/en-US-BP/guide/transitions" data-v-14fc1aee><span class="text" data-v-14fc1aee>Built-in Transitions</span><i class="k-icon ml-1" style="" data-v-14fc1aee><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" data-v-14fc1aee><path fill="currentColor" d="M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"></path></svg><!--]--></i></a></div></div></div></div><aside class="toc-wrapper" data-v-627db9ac><nav class="toc-content" data-v-627db9ac><h3 class="toc-content__heading" data-v-627db9ac>Contents</h3><!----><div class="m-t-16px" data-v-627db9ac><!--[--><!--]--></div></nav></aside></div><footer class="footer"><div class="footer-main"><h4>Links</h4><a href="https://github.com/kbt-ui/kbt-ui" class="footer-main-link" target="_blank">GitHub</a><a href="https://kbt-ui.gitee.io/zh-CN/" class="footer-main-link" target="_blank">China Mirror 🇨🇳</a><a href="https://github.com/kbt-ui/kbt-ui/releases" class="footer-main-link" target="_blank">Changelog</a><a href="https://element.eleme.io/" class="footer-main-link" target="_blank">Element UI for Vue 2</a></div><div class="footer-main"><h4>Community</h4><a href="https://discord.com/invite/gXK9XNzW3X" class="footer-main-link" target="_blank">Discord</a><a href="https://github.com/kbt-ui/kbt-ui/issues" class="footer-main-link" target="_blank">Feedback</a><a href="https://github.com/kbt-ui/kbt-ui/blob/dev/.github/CONTRIBUTING.zh-CN.md" class="footer-main-link" target="_blank">Contribution</a><a href="https://segmentfault.com/t/kbt-ui" class="footer-main-link" target="_blank">SegmentFault</a></div></footer></main><!----></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"en-us-bp_component_affix.md\":\"ff1de832\",\"en-us-bp_component_alert.md\":\"adf8defd\",\"en-us-bp_component_anchor.md\":\"5963d09c\",\"en-us-bp_component_autocomplete.md\":\"09c80fbf\",\"en-us-bp_component_avatar.md\":\"4e4cbc78\",\"en-us-bp_component_backtop.md\":\"1846c72c\",\"en-us-bp_component_badge.md\":\"d9a6c912\",\"en-us-bp_component_border.md\":\"060871e9\",\"en-us-bp_component_breadcrumb.md\":\"5980034c\",\"en-us-bp_component_button.md\":\"199e8dad\",\"en-us-bp_component_calendar.md\":\"c7feffa7\",\"en-us-bp_component_card.md\":\"2ac3ed98\",\"en-us-bp_component_carousel.md\":\"4db53e77\",\"en-us-bp_component_cascader.md\":\"187b2496\",\"en-us-bp_component_checkbox.md\":\"f7f8d7e8\",\"en-us-bp_component_collapse.md\":\"438499b8\",\"en-us-bp_component_color-picker.md\":\"050ed6f8\",\"en-us-bp_component_color.md\":\"0e8e7cf3\",\"en-us-bp_component_config-provider.md\":\"d5fc6b9d\",\"en-us-bp_component_container.md\":\"673a1f8b\",\"en-us-bp_component_date-picker.md\":\"24d12ada\",\"en-us-bp_component_datetime-picker.md\":\"7c3c007c\",\"en-us-bp_component_descriptions.md\":\"5648d80a\",\"en-us-bp_component_dialog.md\":\"97d2b60b\",\"en-us-bp_component_divider.md\":\"659e4585\",\"en-us-bp_component_drawer.md\":\"1c917ca9\",\"en-us-bp_component_dropdown.md\":\"7bd90572\",\"en-us-bp_component_empty.md\":\"34761111\",\"en-us-bp_component_form.md\":\"cef638db\",\"en-us-bp_component_icon.md\":\"3b0e0262\",\"en-us-bp_component_image.md\":\"ea305738\",\"en-us-bp_component_infinite-scroll.md\":\"472b6eda\",\"en-us-bp_component_input-number.md\":\"fc2ca379\",\"en-us-bp_component_input.md\":\"fe2a5a3a\",\"en-us-bp_component_layout.md\":\"de5719ab\",\"en-us-bp_component_link.md\":\"2eb71c4e\",\"en-us-bp_component_loading.md\":\"bbabc679\",\"en-us-bp_component_menu.md\":\"9c9f42da\",\"en-us-bp_component_message-box.md\":\"2df7576e\",\"en-us-bp_component_message.md\":\"d0fc1fe2\",\"en-us-bp_component_notification.md\":\"07a97f75\",\"en-us-bp_component_overview.md\":\"1baef381\",\"en-us-bp_component_page-header.md\":\"fc94156c\",\"en-us-bp_component_pagination.md\":\"4ebe3c6b\",\"en-us-bp_component_popconfirm.md\":\"309e52fe\",\"en-us-bp_component_popover.md\":\"cb40e3c2\",\"en-us-bp_component_progress.md\":\"12cff358\",\"en-us-bp_component_radio.md\":\"f39331c9\",\"en-us-bp_component_rate.md\":\"78125b1f\",\"en-us-bp_component_result.md\":\"ccde4ad0\",\"en-us-bp_component_scrollbar.md\":\"3a4d057a\",\"en-us-bp_component_select-v2.md\":\"0f062685\",\"en-us-bp_component_select.md\":\"d4aea6fa\",\"en-us-bp_component_skeleton.md\":\"37d301ea\",\"en-us-bp_component_slider.md\":\"3801bb19\",\"en-us-bp_component_space.md\":\"2411e284\",\"en-us-bp_component_statistic.md\":\"6db935df\",\"en-us-bp_component_steps.md\":\"cf8f3579\",\"en-us-bp_component_switch.md\":\"bd99f609\",\"en-us-bp_component_table-v2.md\":\"d17fbf66\",\"en-us-bp_component_table.md\":\"b3d16ffc\",\"en-us-bp_component_tabs.md\":\"e21bc567\",\"en-us-bp_component_tag.md\":\"25976fee\",\"en-us-bp_component_text.md\":\"c10d5893\",\"en-us-bp_component_time-picker.md\":\"15a2498c\",\"en-us-bp_component_time-select.md\":\"33871f92\",\"en-us-bp_component_timeline.md\":\"e4c23a1b\",\"en-us-bp_component_tooltip-v2.md\":\"3cc8e0ce\",\"en-us-bp_component_tooltip.md\":\"fcefda5f\",\"en-us-bp_component_tour.md\":\"bdda6727\",\"en-us-bp_component_transfer.md\":\"42ef6528\",\"en-us-bp_component_tree-select.md\":\"a9d5133e\",\"en-us-bp_component_tree-v2.md\":\"059ffbc5\",\"en-us-bp_component_tree.md\":\"7001c35b\",\"en-us-bp_component_typography.md\":\"2f36619c\",\"en-us-bp_component_upload.md\":\"874322b3\",\"en-us-bp_component_watermark.md\":\"6d822022\",\"en-us-bp_guide_changelog.md\":\"f854a253\",\"en-us-bp_guide_commit-examples.md\":\"08af0c74\",\"en-us-bp_guide_dark-mode.md\":\"50022714\",\"en-us-bp_guide_design.md\":\"a641838c\",\"en-us-bp_guide_dev-faq.md\":\"ea9ead72\",\"en-us-bp_guide_dev-guide.md\":\"d539b133\",\"en-us-bp_guide_i18n.md\":\"583765e0\",\"en-us-bp_guide_installation.md\":\"38e53847\",\"en-us-bp_guide_migration.md\":\"35ac23a2\",\"en-us-bp_guide_namespace.md\":\"745ac5ad\",\"en-us-bp_guide_nav.md\":\"adb6ae5e\",\"en-us-bp_guide_quickstart.md\":\"4a44c9d6\",\"en-us-bp_guide_ssr.md\":\"4d7bc3e5\",\"en-us-bp_guide_theming.md\":\"58644060\",\"en-us-bp_guide_transitions.md\":\"99862bba\",\"en-us-bp_guide_translation.md\":\"ba67e75c\",\"en-us-bp_index.md\":\"a681df20\",\"en-us-bp_resource_index.md\":\"edb01caa\",\"index.md\":\"ef630229\",\"zh-cn_component_affix.md\":\"ff4d5c28\",\"zh-cn_component_alert.md\":\"cae5f868\",\"zh-cn_component_anchor.md\":\"19e47f99\",\"zh-cn_component_autocomplete.md\":\"4e622949\",\"zh-cn_component_avatar.md\":\"585aff94\",\"zh-cn_component_backtop.md\":\"d76793f3\",\"zh-cn_component_badge.md\":\"25ad9018\",\"zh-cn_component_border.md\":\"fce2d573\",\"zh-cn_component_breadcrumb.md\":\"8b119349\",\"zh-cn_component_button.md\":\"57c52755\",\"zh-cn_component_calendar.md\":\"69c96c7e\",\"zh-cn_component_card.md\":\"977dae90\",\"zh-cn_component_carousel.md\":\"e97dd9a9\",\"zh-cn_component_cascader.md\":\"e4062579\",\"zh-cn_component_checkbox.md\":\"ee3f78c7\",\"zh-cn_component_collapse.md\":\"b7acfbbc\",\"zh-cn_component_color-picker.md\":\"ed1370c6\",\"zh-cn_component_color.md\":\"55dc9020\",\"zh-cn_component_config-provider.md\":\"454947b4\",\"zh-cn_component_container.md\":\"923d2d38\",\"zh-cn_component_date-picker.md\":\"3b483397\",\"zh-cn_component_datetime-picker.md\":\"4a74aadc\",\"zh-cn_component_descriptions.md\":\"469f0464\",\"zh-cn_component_dialog.md\":\"af7facdd\",\"zh-cn_component_divider.md\":\"c4eabded\",\"zh-cn_component_drawer.md\":\"1499c4d9\",\"zh-cn_component_dropdown.md\":\"a7e32c7c\",\"zh-cn_component_empty.md\":\"e4f9a429\",\"zh-cn_component_form.md\":\"b5700b10\",\"zh-cn_component_icon.md\":\"a5f9c5e0\",\"zh-cn_component_image.md\":\"4836877c\",\"zh-cn_component_infinite-scroll.md\":\"8cb5c389\",\"zh-cn_component_input-number.md\":\"96db46f4\",\"zh-cn_component_input.md\":\"5a348963\",\"zh-cn_component_layout.md\":\"c10ab721\",\"zh-cn_component_link.md\":\"7879f764\",\"zh-cn_component_loading.md\":\"e8981123\",\"zh-cn_component_menu.md\":\"26ee1e24\",\"zh-cn_component_message-box.md\":\"31e85f59\",\"zh-cn_component_message.md\":\"c6e3cb1c\",\"zh-cn_component_notification.md\":\"21aa7e72\",\"zh-cn_component_overview.md\":\"8a89ae09\",\"zh-cn_component_page-header.md\":\"7eaf5bc1\",\"zh-cn_component_pagination.md\":\"7721f9aa\",\"zh-cn_component_popconfirm.md\":\"37e27793\",\"zh-cn_component_popover.md\":\"20e01eff\",\"zh-cn_component_progress.md\":\"617fd1ac\",\"zh-cn_component_radio.md\":\"39bfd1ab\",\"zh-cn_component_rate.md\":\"6df942f9\",\"zh-cn_component_result.md\":\"ff8d8e30\",\"zh-cn_component_scrollbar.md\":\"82c6288f\",\"zh-cn_component_select-v2.md\":\"1e4f1aac\",\"zh-cn_component_select.md\":\"f7837141\",\"zh-cn_component_skeleton.md\":\"b84f205c\",\"zh-cn_component_slider.md\":\"c6a4a33e\",\"zh-cn_component_space.md\":\"6d9a820f\",\"zh-cn_component_statistic.md\":\"f75e9029\",\"zh-cn_component_steps.md\":\"e5cd5a8a\",\"zh-cn_component_switch.md\":\"5c78b7fd\",\"zh-cn_component_table-v2.md\":\"ebb18b0e\",\"zh-cn_component_table.md\":\"e222759a\",\"zh-cn_component_tabs.md\":\"fb602cb5\",\"zh-cn_component_tag.md\":\"6d86b00d\",\"zh-cn_component_text.md\":\"451f52ee\",\"zh-cn_component_time-picker.md\":\"1ed38868\",\"zh-cn_component_time-select.md\":\"dc339980\",\"zh-cn_component_timeline.md\":\"035ff744\",\"zh-cn_component_tooltip-v2.md\":\"c078bd85\",\"zh-cn_component_tooltip.md\":\"fce87f0d\",\"zh-cn_component_tour.md\":\"3d86fc14\",\"zh-cn_component_transfer.md\":\"f4b71ae1\",\"zh-cn_component_tree-select.md\":\"d4167b33\",\"zh-cn_component_tree-v2.md\":\"0aedc31d\",\"zh-cn_component_tree.md\":\"b7a78ec2\",\"zh-cn_component_typography.md\":\"11ca210d\",\"zh-cn_component_upload.md\":\"2fe34367\",\"zh-cn_component_watermark.md\":\"fe334450\",\"zh-cn_guide_changelog.md\":\"c05e5c65\",\"zh-cn_guide_commit-examples.md\":\"3323c076\",\"zh-cn_guide_dark-mode.md\":\"fdfd235a\",\"zh-cn_guide_design.md\":\"2d169af9\",\"zh-cn_guide_dev-faq.md\":\"b93a403f\",\"zh-cn_guide_dev-guide.md\":\"b38ae64f\",\"zh-cn_guide_i18n.md\":\"15f90473\",\"zh-cn_guide_installation.md\":\"dae3e51f\",\"zh-cn_guide_migration.md\":\"57367795\",\"zh-cn_guide_namespace.md\":\"f0bd0aa4\",\"zh-cn_guide_nav.md\":\"1e74610d\",\"zh-cn_guide_quickstart.md\":\"7c5a5769\",\"zh-cn_guide_ssr.md\":\"0ceb5f29\",\"zh-cn_guide_theming.md\":\"315e872d\",\"zh-cn_guide_transitions.md\":\"44e7240a\",\"zh-cn_guide_translation.md\":\"971f37e5\",\"zh-cn_index.md\":\"eb9e74f2\",\"zh-cn_resource_index.md\":\"9d24e7c4\"}")</script>
    <script type="module" async src="/assets/app.2f331f2f.js"></script>
    
  </body>
</html>